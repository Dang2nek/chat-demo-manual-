<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>V-Cipher v6 Messenger</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; height: 100vh; display: flex; }
    .sidebar { width: 250px; background: #f5f5f5; border-right: 1px solid #ddd; display: flex; flex-direction: column; }
    .sidebar-header { padding: 15px; font-weight: bold; background: #007bff; color: white; }
    .chat-list { flex: 1; overflow-y: auto; }
    .chat-user { padding: 10px 15px; cursor: pointer; border-bottom: 1px solid #eee; }
    .chat-user:hover { background: #eaeaea; }
    .chat-user.active { background: #d0e7ff; }
    .main { flex: 1; display: flex; flex-direction: column; }
    .header { background: #007bff; color: #fff; padding: 15px; font-weight: bold; }
    #chat { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; background: #e5ddd5; }
    .msg { margin: 5px 0; padding: 10px 15px; border-radius: 20px; max-width: 60%; word-wrap: break-word; }
    .me { background: #007bff; color: white; align-self: flex-end; border-bottom-right-radius: 5px; }
    .other { background: #f1f0f0; color: black; align-self: flex-start; border-bottom-left-radius: 5px; }
    .footer { display: flex; padding: 10px; border-top: 1px solid #ddd; background: #fff; }
    .footer textarea { flex: 1; resize: none; padding: 10px; border-radius: 10px; border: 1px solid #ccc; }
    .footer button { margin-left: 10px; padding: 0 20px; border: none; border-radius: 10px; background: #007bff; color: white; cursor: pointer; }
    .footer button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">Chats</div>
    <div class="chat-list" id="chatList">
      <div class="chat-user active" onclick="selectUser('Alice')">Alice</div>
      <div class="chat-user" onclick="selectUser('Bob')">Bob</div>
      <div class="chat-user" onclick="selectUser('Charlie')">Charlie</div>
    </div>
  </div>

  <!-- Main Chat -->
  <div class="main">
    <div class="header" id="chatHeader">Chat with Alice</div>
    <div id="chat"></div>
    <div class="footer">
      <textarea id="msgInput" rows="2" placeholder="Type message..."></textarea>
      <button onclick="sendMsg()">Send</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById("chat");
    const msgInput = document.getElementById("msgInput");
    const chatHeader = document.getElementById("chatHeader");
    const chatList = document.getElementById("chatList");

    let currentUser = "Alice";

    // Fake WebRTC DataChannel for demo (chưa kết nối signaling)
    let channel = {
      send: (msg) => {
        addMsg("me", msg);
        // giả lập tin nhắn bên kia trả lời
        setTimeout(() => addMsg("other", "Reply: " + msg), 1000);
      }
    };

    function sendMsg() {
      const msg = msgInput.value.trim();
      if (!msg) return;
      channel.send(msg);
      msgInput.value = "";
    }

    function addMsg(who, text) {
      const div = document.createElement("div");
      div.className = "msg " + who;
      div.textContent = text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function selectUser(user) {
      currentUser = user;
      chatHeader.textContent = "Chat with " + user;
      [...chatList.children].forEach(el => el.classList.remove("active"));
      event.target.classList.add("active");
      chatBox.innerHTML = ""; // clear chat khi đổi user
    }
  </script>
</body>
</html>
